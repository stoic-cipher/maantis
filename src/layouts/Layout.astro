---
import Logo from '../components/Logo.astro';
import MaantisLogoHeader from '../components/react/MaantisLogoHeader';
import MaantisLogoHeaderStatic from '../components/MaantisLogoHeaderStatic.astro';
import MaantisLogoIcon from '../components/react/MaantisLogoIcon';

interface Props {
	title?: string;
	description?: string;
}

const {
	title = 'MAANTIS — Modular Adaptive Architecture',
	description = 'High-performance web development consultancy. We build precision-engineered websites, web applications, and cloud infrastructure designed for speed, scale, and reliability.'
} = Astro.props;

const fullTitle = title === 'MAANTIS — Modular Adaptive Architecture' ? title : `${title} | MAANTIS`;

// Analytics configuration - MAANTIS tracking
const GTM_ID = import.meta.env.PUBLIC_GTM_ID || 'GTM-KNX9CT7D';
const GA4_ID = import.meta.env.PUBLIC_GA4_ID || 'G-9CLDKC15YF';
---

<!doctype html>
<html lang="en">
	<!--
	███╗   ███╗ █████╗  █████╗ ███╗   ██╗████████╗██╗███████╗
	████╗ ████║██╔══██╗██╔══██╗████╗  ██║╚══██╔══╝██║██╔════╝
	██╔████╔██║███████║███████║██╔██╗ ██║   ██║   ██║███████╗
	██║╚██╔╝██║██╔══██║██╔══██║██║╚██╗██║   ██║   ██║╚════██║
	██║ ╚═╝ ██║██║  ██║██║  ██║██║ ╚████║   ██║   ██║███████║
	╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝   ╚═╝   ╚═╝╚══════╝

	Modular Adaptive Architecture for Networked Technology and Intelligent Systems

	Engineered with precision. Built to last.
	https://maantis.com

	Like what you see? We're hiring: contact@maantis.com
	-->
	<head>
		<!-- Google Tag Manager -->
		<script is:inline define:vars={{ GTM_ID }}>
			(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer',GTM_ID);
		</script>
		<!-- End Google Tag Manager -->

		<!-- Google Analytics (GA4) - Direct Implementation -->
		<script is:inline async src={`https://www.googletagmanager.com/gtag/js?id=${GA4_ID}`}></script>
		<script is:inline define:vars={{ GA4_ID }}>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', GA4_ID);
		</script>
		<!-- End Google Analytics -->

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Primary Meta Tags -->
		<title>{fullTitle}</title>
		<meta name="title" content={fullTitle} />
		<meta name="description" content={description} />
		<meta name="keywords" content="web development, high-performance websites, cloud infrastructure, Astro, React, Next.js, AWS, performance engineering, website optimization, custom web applications" />
		<meta name="author" content="MAANTIS" />
		<meta name="generator" content={Astro.generator} />

		<!-- Canonical URL -->
		<link rel="canonical" href={`https://maantis.com${Astro.url.pathname}`} />

		<!-- Favicon -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" sizes="180x180" href="/logo.png" />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={`https://maantis.com${Astro.url.pathname}`} />
		<meta property="og:title" content={fullTitle} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content="https://maantis.com/logo.png" />
		<meta property="og:site_name" content="MAANTIS" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content={`https://maantis.com${Astro.url.pathname}`} />
		<meta name="twitter:title" content={fullTitle} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content="https://maantis.com/logo.png" />

		<!-- Additional Meta Tags -->
		<meta name="robots" content="index, follow" />
		<meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
		<meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
		<meta name="google-site-verification" content="YOUR_VERIFICATION_CODE_HERE" />
		<meta name="theme-color" content="#0a1628" />
		<meta name="format-detection" content="telephone=no" />

		<!-- Fonts - using system fonts for optimal performance -->
		<!-- Google Fonts removed to eliminate render-blocking -->

		<!-- JSON-LD Structured Data -->
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@type": "Organization",
				"name": "MAANTIS",
				"alternateName": "Modular Adaptive Architecture for Networked Technology and Intelligent Systems",
				"url": "https://maantis.com",
				"logo": "https://maantis.com/logo.png",
				"description": "High-performance web development consultancy specializing in custom websites, web applications, and cloud infrastructure.",
				"sameAs": [
					"https://github.com/maantis"
				],
				"contactPoint": {
					"@type": "ContactPoint",
					"email": "contact@maantis.com",
					"contactType": "Customer Service"
				},
				"address": {
					"@type": "PostalAddress",
					"addressCountry": "US"
				},
				"areaServed": "Worldwide",
				"serviceType": [
					"Web Development",
					"Cloud Infrastructure",
					"Performance Engineering",
					"Custom Web Applications"
				]
			}
		</script>
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript>
			<iframe src={`https://www.googletagmanager.com/ns.html?id=${GTM_ID}`} height="0" width="0" style="display:none;visibility:hidden"></iframe>
		</noscript>
		<!-- End Google Tag Manager (noscript) -->

		<!-- 🦐 Navigation: Fast. Precise. Adaptive. Like the mantis shrimp's strike. -->
		<nav class="nav">
			<div class="nav-container">
				<a href="/" class="logo-link" aria-label="MAANTIS - Home">
					<MaantisLogoHeaderStatic />
				</a>
				<div class="nav-links">
					<a href="/">Home</a>
					<a href="/services">Services</a>
					<a href="/blog">Insights</a>
					<a href="/about">About</a>
				</div>
			</div>
		</nav>

		<!-- 🎯 Content: Where precision meets performance -->
		<slot />

		<!-- ⚡ Footer: 16 photoreceptors. Infinite possibilities. -->
		<footer class="footer">
			<div class="footer-container">
				<div class="footer-content">
					<div class="footer-brand">
						<MaantisLogoIcon
							size="medium"
							interactive={true}
							showText={true}
							autoRotate={false}
							variant="neural"
							client:visible
						/>
						<p class="footer-tagline">Precision. Adaptation. Intelligence.</p>
					</div>
					<div class="footer-links">
						<div class="footer-column">
							<h4>Navigate</h4>
							<a href="/">Home</a>
							<a href="/services">Services</a>
							<a href="/blog">Insights</a>
							<a href="/about">About</a>
						</div>
						<div class="footer-column">
							<h4>Connect</h4>
							<a href="mailto:contact@maantis.com">Contact</a>
							<a href="https://github.com/maantis" target="_blank" rel="noopener noreferrer">GitHub</a>
						</div>
					</div>
				</div>
				<div class="footer-bottom">
					<p>&copy; {new Date().getFullYear()} MAANTIS. Engineered with clarity.</p>
				</div>
			</div>
		</footer>

		<!--
		═══════════════════════════════════════════════════════════════════════════
		Built by MAANTIS — where engineering meets elegance.

		The mantis shrimp can strike with the force of a .22 caliber bullet.
		This site loads just as fast.

		Performance isn't luck. It's engineering.
		═══════════════════════════════════════════════════════════════════════════
		-->

		<script is:inline>
			// Easter egg for curious developers 🦐
			console.log(
				'%c███╗   ███╗ █████╗  █████╗ ███╗   ██╗████████╗██╗███████╗',
				'color: #00d9ff; font-weight: bold; font-family: monospace;'
			);
			console.log(
				'%c████╗ ████║██╔══██╗██╔══██╗████╗  ██║╚══██╔══╝██║██╔════╝',
				'color: #00d9ff; font-weight: bold; font-family: monospace;'
			);
			console.log(
				'%c██╔████╔██║███████║███████║██╔██╗ ██║   ██║   ██║███████╗',
				'color: #00d9ff; font-weight: bold; font-family: monospace;'
			);
			console.log(
				'%c██║╚██╔╝██║██╔══██║██╔══██║██║╚██╗██║   ██║   ██║╚════██║',
				'color: #00d9ff; font-weight: bold; font-family: monospace;'
			);
			console.log(
				'%c██║ ╚═╝ ██║██║  ██║██║  ██║██║ ╚████║   ██║   ██║███████║',
				'color: #00d9ff; font-weight: bold; font-family: monospace;'
			);
			console.log(
				'%c╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝   ╚═╝   ╚═╝╚══════╝',
				'color: #00d9ff; font-weight: bold; font-family: monospace;'
			);
			console.log('');
			console.log(
				'%c🦐 Like what you see? We\'re building something special.',
				'color: #90e0ef; font-size: 14px;'
			);
			console.log(
				'%cEngineered by MAANTIS — https://maantis.com',
				'color: #778da9; font-size: 12px;'
			);
			console.log(
				'%c📧 contact@maantis.com',
				'color: #778da9; font-size: 12px;'
			);
			console.log('');
			console.log(
				'%cFun fact: Mantis shrimp can see 16 color receptors. Humans? Only 3.',
				'color: #415a77; font-size: 11px; font-style: italic;'
			);
			console.log(
				'%cWe see performance opportunities others miss.',
				'color: #415a77; font-size: 11px; font-style: italic;'
			);
		</script>
	</body>
</html>

<style is:global>
	/**
	 * MAANTIS Design System
	 *
	 * Engineered for performance. Designed for precision.
	 * Every pixel. Every millisecond. Matters.
	 *
	 * Built by MAANTIS — https://maantis.com
	 */

	/* ==================== DESIGN TOKENS ==================== */
	/* Color palette inspired by ocean depths and the mantis shrimp's vision spectrum */
	:root {
		/* Colors - Inspired by mantis shrimp vision and ocean depths */
		--color-depth: #0a1628;
		--color-depth-light: #0d1b2a;
		--color-ocean: #1b263b;
		--color-ocean-light: #415a77;

		--color-strike: #00d9ff;
		--color-strike-dim: #00b4d8;
		--color-accent: #90e0ef;

		--color-surface: #0f1419;
		--color-surface-elevated: #1a1f26;
		--color-border: #2d3748;

		--color-text-primary: #e0e1dd;
		--color-text-secondary: #9db4ce; /* Improved contrast for WCAG AA compliance */
		--color-text-dim: #6b8caf; /* Lightened for better readability */

		/* Typography - optimized system fonts for instant load */
		--font-body: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
		--font-mono: ui-monospace, 'SF Mono', 'Cascadia Code', 'Roboto Mono', 'Courier New', monospace;

		/* Spacing */
		--space-xs: 0.5rem;
		--space-sm: 1rem;
		--space-md: 1.5rem;
		--space-lg: 2rem;
		--space-xl: 3rem;
		--space-2xl: 4rem;

		/* Layout */
		--max-width: 1200px;
		--nav-height: 70px;
	}

	/* ==================== RESET & BASE ==================== */
	*,
	*::before,
	*::after {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	html {
		font-family: var(--font-body);
		background: var(--color-depth);
		color: var(--color-text-primary);
		line-height: 1.6;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}

	body {
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	/* ==================== NAVIGATION ==================== */
	.nav {
		position: sticky;
		top: 0;
		z-index: 100;
		background: rgba(10, 22, 40, 0.7);
		backdrop-filter: blur(20px) saturate(180%);
		-webkit-backdrop-filter: blur(20px) saturate(180%);
		border-bottom: 1px solid rgba(0, 217, 255, 0.1);
		box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
		height: var(--nav-height);
	}

	.nav-container {
		max-width: var(--max-width);
		margin: 0 auto;
		padding: 0 var(--space-md);
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: space-between;
	}

	.logo-link {
		display: flex;
		align-items: center;
		text-decoration: none;
		transition: opacity 0.2s;
	}

	.logo-link:hover {
		opacity: 0.9;
	}

	.nav-links {
		display: flex;
		gap: var(--space-lg);
	}

	.nav-links a {
		color: var(--color-text-secondary);
		text-decoration: none;
		font-weight: 500;
		font-size: 0.95rem;
		letter-spacing: 0.01em;
		transition: color 0.2s;
		position: relative;
		padding: 0.75rem 0.5rem; /* Ensure 48px minimum tap target height */
		display: inline-block;
	}

	.nav-links a:hover {
		color: var(--color-strike);
	}

	.nav-links a::after {
		content: '';
		position: absolute;
		bottom: -4px;
		left: 0;
		width: 0;
		height: 2px;
		background: var(--color-strike);
		transition: width 0.2s;
	}

	.nav-links a:hover::after {
		width: 100%;
	}

	/* ==================== FOOTER ==================== */
	.footer {
		margin-top: auto;
		background: var(--color-surface);
		border-top: 1px solid var(--color-border);
		padding: var(--space-2xl) 0 var(--space-md);
	}

	.footer-container {
		max-width: var(--max-width);
		margin: 0 auto;
		padding: 0 var(--space-md);
	}

	.footer-content {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: var(--space-xl);
		margin-bottom: var(--space-xl);
	}

	.footer-brand {
		display: flex;
		flex-direction: column;
		gap: var(--space-sm);
	}

	.footer-tagline {
		color: var(--color-text-secondary);
		font-family: var(--font-mono);
		font-size: 0.875rem;
		margin-top: var(--space-xs);
	}

	.footer-links {
		display: flex;
		gap: var(--space-xl);
		justify-content: flex-end;
	}

	.footer-column {
		display: flex;
		flex-direction: column;
		gap: var(--space-xs);
	}

	.footer-column h4 {
		color: var(--color-text-primary);
		font-size: 0.875rem;
		font-weight: 600;
		margin-bottom: var(--space-xs);
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	.footer-column a {
		color: var(--color-text-secondary);
		text-decoration: none;
		font-size: 0.875rem;
		transition: color 0.2s;
	}

	.footer-column a:hover {
		color: var(--color-strike);
	}

	.footer-bottom {
		padding-top: var(--space-lg);
		border-top: 1px solid var(--color-border);
		text-align: center;
	}

	.footer-bottom p {
		color: var(--color-text-dim);
		font-size: 0.875rem;
	}

	/* ==================== RESPONSIVE ==================== */
	@media (max-width: 768px) {
		.nav-links {
			gap: var(--space-md);
		}

		.nav-links a {
			font-size: 0.875rem;
		}

		.footer-content {
			grid-template-columns: 1fr;
		}

		.footer-links {
			justify-content: flex-start;
		}
	}

	@media (max-width: 480px) {
		.nav-container {
			padding: 0 var(--space-sm);
		}

		.nav-links {
			gap: var(--space-sm);
		}

		.nav-links a {
			font-size: 0.8rem;
		}

		.footer-container {
			padding: 0 var(--space-sm);
		}

		.footer-column h4 {
			font-size: 0.8rem;
		}

		.footer-column a {
			font-size: 0.8rem;
		}

		.footer-bottom p {
			font-size: 0.8rem;
		}
	}
</style>
